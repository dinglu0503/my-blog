{"ast":null,"code":"var _jsxFileName = \"/Users/dinglu/Downloads/code/blog/my-blog/src/TodoList/TodoList.js\";\nimport React, { Component, Fragment } from 'react';\nimport TodoItem from '../TodoItem/TodoItem';\nimport Test from '../Test/Test';\nimport axios from 'axios';\nimport '../style.css';\n\nclass TodoList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleInputChange = e => {\n      const value = this.input.value;\n      this.setState(() => ({\n        inputValue: value\n      }));\n    };\n\n    this.handleButtonClick = () => {\n      // this.setState(() => {\n      //   return {\n      //     list:[...this.state.list, this.state.inputValue],\n      //     inputValue:''\n      //   }\n      // })\n      this.setState(prevState => {\n        return {\n          list: [...prevState.list, prevState.inputValue],\n          inputValue: ''\n        };\n      }, () => {\n        console.log(this.ul.querySelectorAll('div').length);\n      });\n    };\n\n    this.handleItemDelete = index => {\n      this.setState(prevState => {\n        const list = [...prevState.list];\n        list.splice(index, 1);\n        return {\n          list\n        };\n      });\n    };\n\n    this.state = {\n      inputValue: '',\n      list: []\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleButtonClick = this.handleButtonClick.bind(this);\n    this.handleItemDelete = this.handleItemDelete.bind(this);\n  }\n\n  componentDidMount() {\n    axios.get('/api/todolist').then(res => {\n      console.log(res.data);\n      this.setState(() => {\n        return {\n          list: res.data\n        };\n      });\n    }).catch(() => {\n      console.log('error');\n    });\n  }\n\n  render() {\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"insertArea\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }, \"\\u8F93\\u5165\\u5185\\u5BB9\"), React.createElement(\"input\", {\n      id: \"insertArea\",\n      className: \"input\",\n      value: this.state.inputValue,\n      onChange: this.handleInputChange,\n      ref: input => {\n        this.input = input;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.handleButtonClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, \"\\u63D0\\u4EA4\")), React.createElement(\"ul\", {\n      ref: ul => {\n        this.ul = ul;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, this.getTodoItem()), React.createElement(Test, {\n      content: this.state.inputValue,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }));\n  }\n\n  getTodoItem() {\n    return this.state.list.map((item, index) => {\n      return React.createElement(TodoItem, {\n        key: index,\n        content: item,\n        index: index,\n        deleteItem: this.handleItemDelete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      });\n    });\n  }\n\n}\n\nexport default TodoList;","map":{"version":3,"sources":["/Users/dinglu/Downloads/code/blog/my-blog/src/TodoList/TodoList.js"],"names":["React","Component","Fragment","TodoItem","Test","axios","TodoList","constructor","props","handleInputChange","e","value","input","setState","inputValue","handleButtonClick","prevState","list","console","log","ul","querySelectorAll","length","handleItemDelete","index","splice","state","bind","componentDidMount","get","then","res","data","catch","render","getTodoItem","map","item"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAOC,IAAP,MAAiB,cAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,cAAP;;AAEA,MAAMC,QAAN,SAAuBL,SAAvB,CAAgC;AAC9BM,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SA8DnBC,iBA9DmB,GA8DEC,CAAD,IAAO;AACzB,YAAMC,KAAK,GAAG,KAAKC,KAAL,CAAWD,KAAzB;AACA,WAAKE,QAAL,CAAc,OAAO;AACnBC,QAAAA,UAAU,EAAEH;AADO,OAAP,CAAd;AAGD,KAnEkB;;AAAA,SAqEnBI,iBArEmB,GAqEC,MAAM;AACxB;AACA;AACA;AACA;AACA;AACA;AAEA,WAAKF,QAAL,CAAeG,SAAD,IAAe;AAC3B,eAAO;AACLC,UAAAA,IAAI,EAAC,CAAC,GAAGD,SAAS,CAACC,IAAd,EAAoBD,SAAS,CAACF,UAA9B,CADA;AAELA,UAAAA,UAAU,EAAC;AAFN,SAAP;AAID,OALD,EAKG,MAAM;AACPI,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,EAAL,CAAQC,gBAAR,CAAyB,KAAzB,EAAgCC,MAA5C;AACD,OAPD;AAQD,KArFkB;;AAAA,SAuFnBC,gBAvFmB,GAuFCC,KAAD,IAAW;AAC5B,WAAKX,QAAL,CAAeG,SAAD,IAAe;AAC3B,cAAMC,IAAI,GAAG,CAAC,GAAGD,SAAS,CAACC,IAAd,CAAb;AACAA,QAAAA,IAAI,CAACQ,MAAL,CAAYD,KAAZ,EAAmB,CAAnB;AACA,eAAO;AACLP,UAAAA;AADK,SAAP;AAGD,OAND;AAOD,KA/FkB;;AAEjB,SAAKS,KAAL,GAAa;AACXZ,MAAAA,UAAU,EAAE,EADD;AAEXG,MAAAA,IAAI,EAAE;AAFK,KAAb;AAIA,SAAKR,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBkB,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKZ,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBY,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKJ,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBI,IAAtB,CAA2B,IAA3B,CAAxB;AACD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClBvB,IAAAA,KAAK,CAACwB,GAAN,CAAU,eAAV,EACMC,IADN,CACYC,GAAD,IAAS;AACbb,MAAAA,OAAO,CAACC,GAAR,CAAYY,GAAG,CAACC,IAAhB;AACA,WAAKnB,QAAL,CAAc,MAAM;AACnB,eAAO;AACLI,UAAAA,IAAI,EAAEc,GAAG,CAACC;AADL,SAAP;AAGA,OAJD;AAKD,KARN,EASMC,KATN,CASY,MAAM;AACXf,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACD,KAXN;AAYD;;AAEDe,EAAAA,MAAM,GAAG;AACP,WACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,OAAO,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,EAEE;AACE,MAAA,EAAE,EAAC,YADL;AAEE,MAAA,SAAS,EAAC,OAFZ;AAGE,MAAA,KAAK,EAAE,KAAKR,KAAL,CAAWZ,UAHpB;AAIE,MAAA,QAAQ,EAAE,KAAKL,iBAJjB;AAKE,MAAA,GAAG,EAAGG,KAAD,IAAW;AAAC,aAAKA,KAAL,GAAaA,KAAb;AAAmB,OALtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EASE;AAAQ,MAAA,OAAO,EAAE,KAAKG,iBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBATF,CAFF,EAaE;AAAI,MAAA,GAAG,EAAGK,EAAD,IAAQ;AAAC,aAAKA,EAAL,GAAQA,EAAR;AAAW,OAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKe,WAAL,EADH,CAbF,EAgBE,oBAAC,IAAD;AAAM,MAAA,OAAO,EAAE,KAAKT,KAAL,CAAWZ,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAhBF,CADF;AAoBD;;AAEDqB,EAAAA,WAAW,GAAI;AACb,WAAO,KAAKT,KAAL,CAAWT,IAAX,CAAgBmB,GAAhB,CAAoB,CAACC,IAAD,EAAOb,KAAP,KAAiB;AAC1C,aACE,oBAAC,QAAD;AACE,QAAA,GAAG,EAAEA,KADP;AAEE,QAAA,OAAO,EAAEa,IAFX;AAGE,QAAA,KAAK,EAAEb,KAHT;AAIE,QAAA,UAAU,EAAE,KAAKD,gBAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAQD,KATM,CAAP;AAUD;;AA7D6B;;AAmGhC,eAAejB,QAAf","sourcesContent":["import React, {Component, Fragment} from 'react';\nimport TodoItem from '../TodoItem/TodoItem'\nimport Test from '../Test/Test'\nimport axios from 'axios';\n\nimport '../style.css';\n\nclass TodoList extends Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputValue: '',\n      list: []\n    }\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleButtonClick = this.handleButtonClick.bind(this);\n    this.handleItemDelete = this.handleItemDelete.bind(this);\n  }\n\n  componentDidMount() {\n    axios.get('/api/todolist')\n         .then((res) => {\n           console.log(res.data);\n           this.setState(() => {\n            return {\n              list: res.data\n            }\n           })\n         })\n         .catch(() => {\n           console.log('error');\n         })\n  }\n\n  render() {\n    return(\n      <Fragment>\n        { /* 我是注释  */ }\n        <div>\n          <label htmlFor=\"insertArea\">输入内容</label>\n          <input \n            id=\"insertArea\" \n            className='input'\n            value={this.state.inputValue} \n            onChange={this.handleInputChange} \n            ref={(input) => {this.input = input}}\n          />\n          <button onClick={this.handleButtonClick}>提交</button>\n        </div>\n        <ul ref={(ul) => {this.ul=ul}}>\n          {this.getTodoItem()}\n        </ul>\n        <Test content={this.state.inputValue} />\n      </Fragment>\n    )\n  }\n\n  getTodoItem () {\n    return this.state.list.map((item, index) => {\n      return (\n        <TodoItem \n          key={index}\n          content={item} \n          index={index}\n          deleteItem={this.handleItemDelete}\n        />\n      )\n    })\n  }\n  \n  handleInputChange = (e) => {\n    const value = this.input.value;\n    this.setState(() => ({\n      inputValue: value\n    }));\n  }\n\n  handleButtonClick = () => {\n    // this.setState(() => {\n    //   return {\n    //     list:[...this.state.list, this.state.inputValue],\n    //     inputValue:''\n    //   }\n    // })\n\n    this.setState((prevState) => {\n      return {\n        list:[...prevState.list, prevState.inputValue],\n        inputValue:''\n      }\n    }, () => {\n      console.log(this.ul.querySelectorAll('div').length);\n    });\n  }\n\n  handleItemDelete = (index) => {\n    this.setState((prevState) => {\n      const list = [...prevState.list];\n      list.splice(index, 1);\n      return {\n        list\n      }\n    })\n  }\n}\n\nexport default TodoList;"]},"metadata":{},"sourceType":"module"}